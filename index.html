<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project KiWI - The Future of Farming</title>
 
    <!-- Google Fonts: Inter for a clean, modern look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
 
    <!-- Phosphor Icons for a modern aesthetic -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
 
    <!-- Three.js CDN for 3D animation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
 
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* Prevent scrolling due to the fixed canvas */
        }

        /* Gradient for the main title text */
        .title-gradient {
            background-image: linear-gradient(to right, #14b8a6, #3b82f6, #6366f1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Full-screen canvas for the 3D background */
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            display: block;
            z-index: -1;
        }

        /* Main content container with a futuristic frosted glass effect */
        .main-content {
            background-color: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 8px 60px rgba(0, 0, 0, 0.1);
            transform: scale(0.95);
            opacity: 0;
        }

        /* Pre-loader for a smooth transition */
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #f1f5f9;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 1s ease-out;
        }
        .preloader.hidden {
            opacity: 0;
            visibility: hidden;
        }
        .preloader .loader-text {
            font-size: 2rem;
            font-weight: 700;
            animation: pulse 1.5s infinite ease-in-out;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
        }

        /* Animated border for buttons */
        .animated-border {
            position: relative;
            z-index: 10;
            overflow: hidden;
            transition: all 0.3s ease-in-out;
        }
        .animated-border::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, #14b8a6, #3b82f6, #6366f1, #c084fc, #ec4899, #f97316);
            background-size: 400%;
            animation: gradient-flow 15s ease infinite;
            z-index: -1;
            opacity: 0.6;
            transition: opacity 0.3s ease;
        }
        .animated-border:hover::before {
            animation-play-state: paused;
            opacity: 1;
        }
        @keyframes gradient-flow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .animated-border::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            bottom: 2px;
            background: #f1f5f9;
            border-radius: inherit;
            z-index: -1;
        }
        
        .animated-border:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(59, 130, 246, 0.4);
        }

        /* Modal styling */
        .modal {
            background-color: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 8px 60px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
            transform: translateY(20px);
            opacity: 0;
        }
        .modal.open {
            transform: translateY(0);
            opacity: 1;
        }

    </style>
</head>
<body class="bg-gray-100 text-slate-800 flex items-center justify-center min-h-screen">

    <!-- Preloader -->
    <div id="preloader" class="preloader">
        <h2 class="loader-text title-gradient">Loading KiWI Ecosystem...</h2>
    </div>

    <!-- The three.js canvas will be injected here by JavaScript -->
    <canvas id="three-canvas"></canvas>

    <!-- Main content container -->
    <div id="main-content" class="main-content max-w-5xl w-full p-6 sm:p-10 text-center rounded-3xl z-10">
        
        <!-- Header section -->
        <header class="mb-12 sm:mb-16">
            <h1 class="text-5xl sm:text-6xl md:text-7xl font-black tracking-tight mb-4 title-gradient">
                Project KiWI
            </h1>
            <p class="text-xl sm:text-2xl text-slate-700 max-w-3xl mx-auto mb-6">
                Connecting Fields to the Future: Intelligent, Inclusive, and Sustainable Agriculture.
            </p>
            <p class="text-base text-slate-500 max-w-3xl mx-auto">
                A unified ecosystem modernizing farming through digital tools, AI-powered insights, and a farmer-first approach.
            </p>
        </header>

        <!-- Main call-to-action buttons -->
        <main class="mb-16">
            <h2 class="text-xl sm:text-2xl font-bold mb-8 text-slate-700">Select your role to begin:</h2>
            <div class="flex flex-col sm:flex-row items-center justify-center gap-6 sm:gap-8 w-full px-2">
                
                <!-- Consumer Button -->
                <a href="https://krishisangam.odoo.com/"
                    title="Go to Krishi Sangam (Consumer Portal)"
                    class="animated-border w-full sm:w-1/2 flex flex-col items-center justify-center px-8 py-10 rounded-3xl shadow-xl">
                    <span class="text-5xl mb-4 text-emerald-600"><i class="ph-fill ph-storefront"></i></span>
                    <span class="text-xl sm:text-2xl font-bold text-slate-800">I'm a Consumer</span>
                    <span class="block text-sm text-slate-500 mt-2">Discover and purchase local produce.</span>
                </a>

                <!-- Farmer Button -->
                <a href="https://krishidwaar.odoo.com/"
                    title="Go to Krishi Dwaar (Farmer Portal)"
                    class="animated-border w-full sm:w-1/2 flex flex-col items-center justify-center px-8 py-10 rounded-3xl shadow-xl">
                    <span class="text-5xl mb-4 text-blue-600"><i class="ph-fill ph-tractor"></i></span>
                    <span class="text-xl sm:text-2xl font-bold text-slate-800">I'm a Farmer</span>
                    <span class="block text-sm text-slate-500 mt-2">Manage your farm and sell your goods directly.</span>
                </a>
            </div>
        </main>
        
        <!-- More Info Button -->
        <button id="more-info-btn" class="text-sm font-bold text-slate-500 hover:text-slate-800 transition-colors duration-300">
            More about Project KiWI
        </button>

        <!-- Footer section -->
        <footer class="mt-8 text-sm text-slate-400">
            &copy; 2025 InnoCreatre. Project KiWI. All rights reserved.
        </footer>
    </div>

    <!-- More Info Modal -->
    <div id="modal" class="modal fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 p-8 sm:p-10 rounded-3xl z-20 max-w-2xl w-full">
        <button id="close-modal-btn" class="absolute top-4 right-4 text-slate-500 hover:text-slate-800 transition-colors">
            <i class="ph-bold ph-x text-2xl"></i>
        </button>
        <h3 class="text-3xl font-bold mb-4 title-gradient">Project KiWI: Our Mission</h3>
        <p class="text-lg text-slate-700 mb-6">
            Project KiWI is more than a platform; it's a movement to redefine agriculture. We are building a decentralized ecosystem that empowers farmers with cutting-edge technology and gives consumers direct access to fresh, local produce.
        </p>
        <ul class="text-left text-slate-600 space-y-4">
            <li class="flex items-start">
                <i class="ph ph-sparkle-fill text-xl text-yellow-500 mr-3 mt-1"></i>
                <div>
                    <h4 class="font-bold text-lg text-slate-800">Intelligent Insights</h4>
                    <p class="text-sm text-slate-500">AI-powered analytics provide real-time data on soil health, weather patterns, and crop yields to optimize farming practices.</p>
                </div>
            </li>
            <li class="flex items-start">
                <i class="ph ph-leaf-fill text-xl text-green-500 mr-3 mt-1"></i>
                <div>
                    <h4 class="font-bold text-lg text-slate-800">Sustainable Practices</h4>
                    <p class="text-sm text-slate-500">Our platform promotes eco-friendly methods and reduces food waste by connecting farmers directly to their markets.</p>
                </div>
            </li>
            <li class="flex items-start">
                <i class="ph ph-hands-clapping-fill text-xl text-indigo-500 mr-3 mt-1"></i>
                <div>
                    <h4 class="font-bold text-lg text-slate-800">Community-Driven</h4>
                    <p class="text-sm text-slate-500">We believe in a farmer-first approach, ensuring fair pricing and a supportive community for all participants.</p>
                </div>
            </li>
        </ul>
    </div>
 
    <script>
        window.onload = function() {
            // Get elements
            const preloader = document.getElementById('preloader');
            const mainContent = document.getElementById('main-content');
            const moreInfoBtn = document.getElementById('more-info-btn');
            const modal = document.getElementById('modal');
            const closeModalBtn = document.getElementById('close-modal-btn');

            // Set up Three.js after a short delay to show the preloader
            setTimeout(() => {
                // Three.js setup
                const canvas = document.getElementById('three-canvas');
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: true });

                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                camera.position.z = 8;

                // --- Central Core object ---
                const coreGeometry = new THREE.IcosahedronGeometry(2, 1);
                const coreMaterial = new THREE.MeshStandardMaterial({
                    color: 0x3b82f6,
                    emissive: 0x3b82f6,
                    emissiveIntensity: 0.5,
                    metalness: 0.8,
                    roughness: 0.3
                });
                const core = new THREE.Mesh(coreGeometry, coreMaterial);
                scene.add(core);

                // --- Network of particles ---
                const particleCount = 400;
                const particlePositions = new Float32Array(particleCount * 3);
                const particleVelocities = [];
                const particleSizes = new Float32Array(particleCount);
                const particleColors = new Float32Array(particleCount * 3);
                
                for (let i = 0; i < particleCount; i++) {
                    const x = (Math.random() - 0.5) * 40;
                    const y = (Math.random() - 0.5) * 40;
                    const z = (Math.random() - 0.5) * 40;
                    particlePositions[i * 3] = x;
                    particlePositions[i * 3 + 1] = y;
                    particlePositions[i * 3 + 2] = z;

                    particleVelocities.push({
                        x: (Math.random() - 0.5) * 0.01,
                        y: (Math.random() - 0.5) * 0.01,
                        z: (Math.random() - 0.5) * 0.01
                    });
                    
                    particleSizes[i] = Math.random() * 0.2 + 0.1;
                    
                    const color = new THREE.Color(0x4ade80).multiplyScalar(Math.random() * 0.5 + 0.5);
                    particleColors[i * 3] = color.r;
                    particleColors[i * 3 + 1] = color.g;
                    particleColors[i * 3 + 2] = color.b;
                }

                const particleGeometry = new THREE.BufferGeometry();
                particleGeometry.setAttribute('position', new THREE.BufferAttribute(particlePositions, 3));
                particleGeometry.setAttribute('size', new THREE.BufferAttribute(particleSizes, 1));
                particleGeometry.setAttribute('color', new THREE.BufferAttribute(particleColors, 3));

                const particleMaterial = new THREE.PointsMaterial({
                    size: 0.1,
                    sizeAttenuation: true,
                    vertexColors: true,
                    blending: THREE.AdditiveBlending,
                    transparent: true
                });
                const particleSystem = new THREE.Points(particleGeometry, particleMaterial);
                scene.add(particleSystem);
                
                // --- Animated connecting lines ---
                const lineGeometry = new THREE.BufferGeometry();
                const linePositions = new Float32Array(particleCount * 3 * 2 * 10); // Max 10 lines per particle
                const lineMaterial = new THREE.LineBasicMaterial({
                    color: 0x3b82f6,
                    blending: THREE.AdditiveBlending,
                    transparent: true,
                    opacity: 0.2
                });
                const lines = new THREE.LineSegments(lineGeometry, lineMaterial);
                scene.add(lines);

                // --- Grid Helper for futuristic look ---
                const gridHelper = new THREE.GridHelper(100, 100, 0x94a3b8, 0xe2e8f0);
                gridHelper.material.opacity = 0.1;
                gridHelper.material.transparent = true;
                scene.add(gridHelper);

                // --- Lighting ---
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
                scene.add(ambientLight);
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight.position.set(5, 5, 5);
                scene.add(directionalLight);

                // --- Mouse Interaction ---
                let mouseX = 0;
                let mouseY = 0;

                document.addEventListener('mousemove', (event) => {
                    mouseX = (event.clientX / window.innerWidth) * 2 - 1;
                    mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
                });
                
                // --- Animation loop ---
                let pulse = 0;
                const animate = () => {
                    requestAnimationFrame(animate);

                    // Update particles
                    const particlePositionsAttribute = particleGeometry.attributes.position;
                    for (let i = 0; i < particleCount; i++) {
                        particlePositionsAttribute.array[i * 3] += particleVelocities[i].x;
                        particlePositionsAttribute.array[i * 3 + 1] += particleVelocities[i].y;
                        particlePositionsAttribute.array[i * 3 + 2] += particleVelocities[i].z;

                        // Reverse direction if particle hits boundary
                        if (particlePositionsAttribute.array[i * 3] > 20 || particlePositionsAttribute.array[i * 3] < -20) particleVelocities[i].x *= -1;
                        if (particlePositionsAttribute.array[i * 3 + 1] > 20 || particlePositionsAttribute.array[i * 3 + 1] < -20) particleVelocities[i].y *= -1;
                        if (particlePositionsAttribute.array[i * 3 + 2] > 20 || particlePositionsAttribute.array[i * 3 + 2] < -20) particleVelocities[i].z *= -1;
                    }
                    particlePositionsAttribute.needsUpdate = true;
                    
                    // Animate core
                    core.rotation.x += 0.0005;
                    core.rotation.y += 0.001;
                    core.position.y = Math.sin(pulse) * 0.2;
                    pulse += 0.01;

                    // Animate connecting lines
                    let lineIndex = 0;
                    for (let i = 0; i < particleCount; i++) {
                        const p1 = new THREE.Vector3(particlePositionsAttribute.array[i * 3], particlePositionsAttribute.array[i * 3 + 1], particlePositionsAttribute.array[i * 3 + 2]);
                        
                        // Connect to nearby particles
                        for (let j = i + 1; j < particleCount; j++) {
                            const p2 = new THREE.Vector3(particlePositionsAttribute.array[j * 3], particlePositionsAttribute.array[j * 3 + 1], particlePositionsAttribute.array[j * 3 + 2]);
                            const distance = p1.distanceTo(p2);

                            if (distance < 5) {
                                linePositions[lineIndex++] = p1.x;
                                linePositions[lineIndex++] = p1.y;
                                linePositions[lineIndex++] = p1.z;
                                linePositions[lineIndex++] = p2.x;
                                linePositions[lineIndex++] = p2.y;
                                linePositions[lineIndex++] = p2.z;
                            }
                        }
                    }
                    lineGeometry.setAttribute('position', new THREE.BufferAttribute(linePositions, 3));
                    lineGeometry.attributes.position.needsUpdate = true;
                    lines.geometry.setDrawRange(0, lineIndex / 3);

                    // Camera follow mouse with smooth easing
                    camera.position.x += (mouseX * 5 - camera.position.x) * 0.02;
                    camera.position.y += (mouseY * 5 - camera.position.y) * 0.02;
                    camera.lookAt(core.position);

                    renderer.render(scene, camera);
                };

                // Handle window resizing
                window.addEventListener('resize', () => {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                });
                
                // Start animation and hide preloader
                animate();
                preloader.classList.add('hidden');
                mainContent.style.opacity = '1';
                mainContent.style.transform = 'scale(1)';
            }, 1000); // Simulate a slight loading time

            // Modal functionality
            moreInfoBtn.addEventListener('click', () => {
                modal.classList.add('open');
            });
            closeModalBtn.addEventListener('click', () => {
                modal.classList.remove('open');
            });
        };
    </script>
</body>
</html>
